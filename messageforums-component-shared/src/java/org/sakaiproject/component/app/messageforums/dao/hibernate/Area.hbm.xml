<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping
    PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">

<hibernate-mapping>

  <class name="org.sakaiproject.component.app.messageforums.dao.hibernate.AreaImpl"
    table="MFR_AREA_T" optimistic-lock="version">

    <!-- Inherited fields from MutableEntity -->
    <id name="id">
      <column name="ID" not-null="true" length="19" />
      <generator class="native">
        <param name="sequence">MFR_AREA_S</param>
      </generator>
    </id>
       
	<!--  Version number used for optimistic locking -->
    <version name="version" column="VERSION" />

    <property name="uuid" column="UUID" length="36" not-null="true" />
    <property name="created" column="CREATED" not-null="true" />
    <property name="createdBy" column="CREATED_BY" length="36" not-null="true" />
    <property name="modified" column="MODIFIED" not-null="true" />
    <property name="modifiedBy" column="MODIFIED_BY" length="36" not-null="true" />

    <!-- Area fields -->
    <property name="contextId">
      <column name="CONTEXT_ID" length="255" not-null="true" />
    </property>
    <property name="name">
      <column name="NAME" length="255" not-null="true" />
    </property>
    <property name="hidden">
      <column name="HIDDEN" not-null="true" />
    </property>
    <property name="typeUuid">
      <column name="TYPE_UUID" length="36" not-null="true" />
    </property>
    <property name="enabled">
      <column name="ENABLED" not-null="true" />
    </property>
	<list name="openForums" lazy="true" table="MFR_OPEN_FORUM_T" cascade="all">
	    <key column="surrogateKey"/>
	    <index column="area_index_col" />
	    <one-to-many class="org.sakaiproject.component.app.messageforums.dao.hibernate.OpenForumImpl" />
	</list>
	<list name="privateForums" lazy="true" table="MFR_PRIVATE_FORUM_T" cascade="all">
	    <key column="surrogateKey"/>
	    <index column="area_index_col" />
	    <one-to-many class="org.sakaiproject.component.app.messageforums.dao.hibernate.PrivateForumImpl" />
	</list>
	<list name="discussionForums" lazy="true" table="MFR_DISCUSSION_FORUM_T" cascade="all">
	    <key column="surrogateKey"/>
	    <index column="area_index_col" />
	    <one-to-many class="org.sakaiproject.component.app.messageforums.dao.hibernate.DiscussionForumImpl" />
	</list>

  </class>

  <query name="findPrivateAreaByCurrentUser">
    <![CDATA[from org.sakaiproject.component.app.messageforums.dao.hibernate.AreaImpl as area where area.id = :id]]>
  </query>

  <query name="findDiscussionAreaByCurrentUser">
    <![CDATA[from org.sakaiproject.component.app.messageforums.dao.hibernate.AreaImpl as area where area.id = :id]]>
  </query>

  <query name="findAreaById">
    <![CDATA[from org.sakaiproject.component.app.messageforums.dao.hibernate.AreaImpl as area where area.id = :id]]>
  </query>

  <query name="findAreaByUuid">
    <![CDATA[from org.sakaiproject.component.app.messageforums.dao.hibernate.AreaImpl as area where area.uuid = :uuid]]>
  </query>
  
  <query name="findAreaByContextId">
     <![CDATA[from org.sakaiproject.component.app.messageforums.dao.hibernate.AreaImpl as item where area.contextId = :contextId]]>
  </query>    

</hibernate-mapping>